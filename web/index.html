<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<!-- $Id$ -->
<title>despotify - the open source Spotify client</title>
<style type="text/css">
html, body {
	font-size: 1em;
	font-family: verdana;
	margin: 0;
	padding: 0;
}
strong, a {
	font-size: 1.2em;
}
h1 { text-align: left }
a.cur {
	font-weight: bold;
}
#wrapper {
	width: 800px;
	margin: 10px auto;
	background: #fff;
	color: #000;
	padding: 15px;
}
#h {
	background: #000;
	text-align:center;
	padding: 25px;
	color: #fff;
}
</style>
</head>

<body>
<div id="wrapper">
<div id="despotify" class="nav">
	<a href="#despotify" class="cur">Despotify</a>
	<strong>&raquo;</strong>
	<a href="#source">Source code</a>
	<strong>&raquo;</strong>
	<a href="#news">News</a>
	<strong>&raquo;</strong>
	<a href="#Clients">Clients</a>
	<strong>&raquo;</strong>
	<a href="#faq">FAQ</a>
	<strong>&raquo;</strong>
	<a href="#criticism">Criticism</a>
	<strong>&raquo;</strong>
	<a href="#legal">Legal</a>
</div>
<h1>Despotify - the open source Spotify client</h1>
<p>#hack.se proudly presents an open source <a href="#">Spotify</a> client</p>
<h3>Features</h3>
<ul>
	<li>C implementation based on F/OSS code</li>
	<li>Proof of Concept multi-OS client with curses (text-based) UI</li>
	<li>Proof of Concept gateway to the Spotify service (text-based protocol, for supporting REST)</li>
</ul>
<div style="padding-left: 10px">
<p><em>&nbsp;Quite a few Spotify related sites have appeared since we launched in October, I've previously mentioned a number of them which are dedicated to sharing playlists but there are lots of other sites that talk about Spotify or have used Spotify in interesting ways.<br />...<br />
&nbsp;We love stuff like this so if you've done something creative with Spotify please let us know, we'd like to see it and share it with everyone.</em></p>
<strong>Source:</strong> <a href="http://www.spotify.com/blog/archives/2009/02/19/spotified-cd-collection-and-some-other-community-sites/">Spotified CD collection and some other community sites</a>
</p>
</div>
<h3>Video intro</h3>
<ul>
	<li><a href="http://www.youtube.com/watch?v=9LUySm2Z8Yk">despotify</a> (youtube.com)</li>
</ul>
<div>
<object width="640" height="385">
<param name="movie" value="http://www.youtube.com/v/9LUySm2Z8Yk&amp;hl=sv&amp;fs=1&amp;rel=0&amp;color1=0x234900&amp;color2=0x4e9e00"></param>
<param name="allowFullScreen" value="true"></param>
<param name="allowscriptaccess" value="always"></param>
<embed src="http://www.youtube.com/v/9LUySm2Z8Yk&amp;hl=sv&amp;fs=1&amp;rel=0&amp;color1=0x234900&amp;color2=0x4e9e00" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="640" height="385"></embed>
</object>
</div>

<hr />

<div id="source" class="nav">
	<a href="#despotify">Despotify</a>
	<strong>&raquo;</strong>
	<a href="#source" class="cur">Source code</a>
	<strong>&raquo;</strong>
	<a href="#news">News</a>
	<strong>&raquo;</strong>
	<a href="#clients">Clients</a>
	<strong>&raquo;</strong>
	<a href="#faq">FAQ</a>
	<strong>&raquo;</strong>
	<a href="#criticism">Criticism</a>
	<strong>&raquo;</strong>
	<a href="#legal">Legal</a>
</div>
<h1>Source code for Despotify</h1>
<p>The latest version of the source code is available in our <a href="http://sourceforge.net/svn/?group_id=254350">Subversion repository</a></p>
<p>Feel free to <a href="http://despotify.svn.sourceforge.net/src/">browse the source code</a></p>
<p>You'll need ncurses (<em>libncurses-dev</em>), OpenSSL (<em>libssl-dev</em>), zlib (<em>zlib1g-dev</em>), libvorbis (<em>libvorbis-dev</em>), expat (<em>libexpat1-dev</em>) and pulseaudio (<em>libpulse-dev</em>) or gstreamer (<em>libgstreamer-plugins-base0.10-0</em> and <em>libgstreamer0.10-dev</em>) to compile.</p>
<hr />


<div id="news" class="nav">
	<a href="#despotify">Despotify</a>
	<strong>&raquo;</strong>
	<a href="#source">Source code</a>
	<strong>&raquo;</strong>
	<a href="#news" class="cur">News</a>
	<strong>&raquo;</strong>
	<a href="#clients">Clients</a>
	<strong>&raquo;</strong>
	<a href="#faq">FAQ</a>
	<strong>&raquo;</strong>
	<a href="#criticism">Criticism</a>
	<strong>&raquo;</strong>
	<a href="#legal">Legal</a>
</div>
<h1>News</h1>
<p>This is a placeholder for things to announce.</p>

<hr />


<div id="clients" class="nav">
	<a href="#despotify">Despotify</a>
	<strong>&raquo;</strong>
	<a href="#source">Source code</a>
	<strong>&raquo;</strong>
	<a href="#news">News</a>
	<strong>&raquo;</strong>
	<a href="#clients" class="cur">Clients</a>
	<strong>&raquo;</strong>
	<a href="#faq">FAQ</a>
	<strong>&raquo;</strong>
	<a href="#criticism">Criticism</a>
	<strong>&raquo;</strong>
	<a href="#legal">Legal</a>
</div>
<h1>Clients</h1>
<p>Although not heavily commented, we hope the source code itself should provide some insight into how things work.</p>
<h3>The despotify client</h3>
<p>
The despotify client is our curses based multi-OS proof of concept client. 
<pre>
.---------------------------------------------------------------------------------.
| Playlists:  3/ 3            Logged in as anonymous on    esther.lon.spotify.com |
| Current playlist: #hack.se  Country      SE  Last ping Wed Feb 19 03:59:25 2009 |
+---------------------------------------------------------------------------------+
.---------------------------------------------------------------------------------.
| available commands: search, play, playlist, help                                |
|                                                                                 |
| list [number]     Show all playlist, or select playlist 'number'.               |
| play [number]     Play first song, or song 'number' in current playlist         |
| pause             Pause current playing track                                   |
| stop              Stop current playing track                                    |
| search &lt;string&gt;   Search tracks                                                 |
|                                                                                 |
|                                                                                 |
|                                                                                 |
|                                                                                 |
|                                                                                 |
|                                                                                 |
|                                                                                 |
|                                                                                 |
|                                                                                 |
+---------------------------------------------------------------------------------+
.--[ textconsole - 'help' is your friend ]----------------------------------------.
|                                                                                 |
| > help                                                                          |
+----------------------------------------------------------[ despotify ]----------+

</pre>
</p>

<h4>Supported commands</h4>
<ul>
	<li><strong>list</strong> <em>[number]</em><br />
		List all playlists or select playlist with number [number]
        </li>
	<li><strong>play</strong> <em>[number]</em><br />
		Play the first song, or the song with number [number], in the currently selected playlist
        </li>
	<li><strong>pause</strong><br />
		Pause the current playing song
        </li>
	<li><strong>stop</strong> <br />
		Stop playing the current track
        </li>
	<li><strong>search</strong> <em>search-text</em><br />
		Search the spotify catalog. Use <em>tag:new</em> as search text to find out what's new.
        </li>
	<li><strong>help</strong><br/>
		Show help text. 
       </li>
</ul>


<h3>The despotify Gateway</h3>
<p>The gateway was implemented to support a HTTP REST API. The idea is to have the gateway running in the background and keep logged in sessions to Spotify alive. The frontend (HTTP) part can easily be implemented by making your favorite web scripting language talk to the backend over a socket.</p>
<h4>Supported commands</h4>
<ul>
	<li><strong>login</strong> <em>username</em> <em>password</em><br />
		Start a new session by logging in as <em>username</em> to Spotify</li>
	<li><strong>session</strong> <em>sessionid</em><br />
		Reconnect to an established session using a session ID reported by the <em>id</em> command.</li>
	<li><strong>id</strong>
		<br />Report the session ID of a logged in session.</li>
	<li><strong>country</strong>
		<br />Report the assigned country code for the logged in user.</li>
	<li><strong>search</strong> <em>search-text</em><br />
		Dump search result as XML. Use <em>tag:new</em> as search text to find out what's new.</li>
	<li><strong>playlist</strong> <em>playlist-id</em><br />
		Dump the playlist as XML. Playlist IDs are 34 characters (hex representation of 17 byte IDs). Use 34 zeroes to get a list of all playlists for the logged in user.</li>
	<li><strong>browsetrack</strong> <em>track-id</em><br />
		Dump the track metadata as XML. Track IDs are 32 characters (hex representation of 16 byte IDs). Use the 32 first characters from the playlist XML dump</li>
	<li><strong>browseartist</strong> <em>artist-id</em><br />
		Dump the artist metadata as XML. Artist IDs are 32 characters (hex representation of 16 byte IDs). Artist IDs are found in browsetrack or search replies.</li>
	<li><strong>logout</strong><br />
		Drop the established session.</li>
	<li><strong>quit</strong><br />
		Shutdown the connection to the gateway. This does not kill an eventual session to Spotify.</li>
</ul>
<h4>Interaction with the gateway</h4>
<p>The gateway uses a text-based protocol to ease testing and integration with other software.</p>
<p>
The output format looks like this:<br />
&lt;HTTP-style error code&gt; &lt;payload length&gt; &lt;OK/WARN/ERROR&gt; &lt;description&gt;\n<br />
[eventual payload data, as long as "payload length" says]
</p>
<p>Here's an example.<br />
<pre>
this is going to fail
501 0 WARN Invalid command 'this is going to fail'
login foouser barpassword
200 0 OK Login successful
country
200 2 OK Assigned country below
SE</pre>



<div id="faq" class="nav">
	<a href="#despotify">Despotify</a>
	<strong>&raquo;</strong>
	<a href="#source">Source code</a>
	<strong>&raquo;</strong>
	<a href="#news">News</a>
	<strong>&raquo;</strong>
	<a href="#clients">Clients</a>
	<strong>&raquo;</strong>
	<a href="#faq" class="cur">FAQ</a>
	<strong>&raquo;</strong>
	<a href="#criticism">Criticism</a>
	<strong>&raquo;</strong>
	<a href="#legal">Legal</a>
</div>
<h1>FAQ</h1>
<h3>Why did you release an open source Spotify client?</h3>
<p>While Spotify is totally awesome, it currently only runs on Windows and Mac OS X (and Linux, if you can live with WINE).</p>
<p>We wanted to be able to use Spotify in more operating systems and in more products. Let's just agree on the fact that it would be awesome if your random open source media center solution could do Spotify too!
</p>

<h3>How long will it take before Spotify blocks your code?</h3>
<p>We hope this does not trigger panic reactions at Spotify and that they can find a way to support our cause.<br />
For a number of reasons, it will probably take us (or anyone else up for the challenge) less time to workaround whatever fix they attempt, than for them to roll out a new release.</p>
<p>We strongly believe Spotify need to support people like us. People that have the time and energy to experiment with new ideas and to develop new tools and services. We don't want to be held back by a company whose key priority is to make money.</p>
<p>Unless they haven't already, they will realize it's pointless to try to prevent hundreds of talented researchers, coders, hackers and curious users from tinkering with their product. The gaming industry, as well as both software and hardware manufacturers, have been trying to do exactly that for the last 20 years, and most have failed.
To this date, the Sony PS3 is the only gaming console out there that has not been cracked. Why?<br />
Likely because Sony decided to open up the platform right from the start, enabling console owners to do anything - from gaming to networking them to break SSL.</p>
<p>Obviously the only solution for Spotify is to open up their platform and still make money from it. One such possibility would be to officially open up their platform for third party products, but only allow premium subscribers to make use of the open API. But that's not for us to decide.</p>

<h3>This is going to destroy Spotify!</h3>
<p>That's the kind of groundless panic reaction we were talking about earlier.</p>

<p>Spotify won't go away over night and, if anything, our project is nothing but a minor speedbump.</p>
<p>Relax and consider why Spotify rocks for a while. Done?<br />
If you're still seeing problems - or solutions to these imaginary problems, repeat the above procedure.</p>


<h3>This code will ultimately allow people to download music from Spotify!</h3>
<p>First of all, people download music anyway. That's just the way it works, be it legal or not.<br />
Live with it. <p/>
<p>Secondly, there are far better places to download music from (with better quality!) than Spotify. 
Downloding/Ripping music from Spotify is just as illegal as anywhere else, the main difference is that the 
bitrate/soundquality is lower in the music ripped from Spotify.</p>
<p>That being said, please don't use our software to cause problems for Spotify!<br />
A lot of people love this excellent service, and are willing to pay for it, us included.</p>

<h3>Why not make the music decryption routine binary only?</h3>
<p>We thought about doing just that, to prevent people from using this code to download music from Spotify, but decided against it.</p>
<p>By definition, that would mean we couldn't call our code free or open source. It would also require us to compile the code for all the platforms people would like to use , which defeats the whole purpose of this project.</p>
<p>In the end it would leave us in the same position as Spotify, i.e. it would only be a matter of time before someone figured things out anyway.</p>

<h3>Can I use your code to skip the ads?</h3>
<p> We have not implemented support for ads since its pointless in an open source client. Patching 
away the ad-routine is just too simple. We strongly believe that you should pay for the premium service
if you want to use the open source client. </p>

<p>In addition to this we have added a simple way for Spotify to identify that the open source client is 
used and we will accept, and support, if Spotify chooses to limit access using our client to 
Premium users only.</p> 

<p>If, and we like to emphasize this, Spotify decide to use the opportunity we have given them to block 
our software completely we will release the missing routine and thereby make our software indistinguishable 
from the 'real' client.</p> 

<h3>Does your software impose the country restrictions?</h3>
<p>No. So called <em>Geographic Rights Management</em> is just stupid and client side restrictions in open source software is silly. The movie industry already proved how inane and futile this is by region coding DVDs. If you want (optional) GRM support, feel free to submit a patch. :)</p>

<h3>How much bandwidth does the client need?</h3>
<p>This question has so far gone unanswered in Spotify's corner at GetSatisfaction.com.</p>
<p>You'll need somewhere around 250-300kbit/s (~25-30 kbyte/s) downstream to be able to play music without interruption. The upstream requirements are neglible since we do not support P2P.</p>

<h3>Why is there no support for P2P?</h3>
<p>Even though supporting P2P would be good for Spotify and most users (except in some mobile environments), it isn't essential for playing music from their service.</p>
<p>We do have some demo code that does P2P authentication, peer exchange and basic file transfers but so far none of us have had time or interest in implementing it properly in the main client.<br />
For now we've decided to focus on delivering an open source alternative that does the basic stuff you'll need, and P2P was not one of them. Maybe in v2.0 ;)<br />
(everything needs a 2.0 version with new features, eyecandy and all bugs and annoyances gone!)</p>

<h3>What license is Despotify under?</h3>
<p>We've choosen a two-clause BSD license. We're serious about making Despotify available to everyone, including those who don't believe in open source.<br />
If the two-clause BSD license doesn't cut it for you, let us know and we'll work something out.
</p>

<h3>Supported operating systems</h3>
<p> Most of the code will compile without complaints on any POSIX and ANSI C compatible platform.<br />
 As of now the audio routines supports CoreAudio for Mac OS X and PulseAudio that in turn supports:
<ul>
<li>Linux</li>
<li>Solaris</li>
<li>FreeBSD</li>
<li>NetBSD</li>
<li>Windows</li>
</ul>

<h3>What about iPhone, WindowsMobile, XBMC or my dishwasher?</h3>
<p> The beauty of open source is that it's now possible to integrate Spotify support into anything
capable of decoding ogg and playing sound. Feel free to port our code to whatever media 
platform fits your lifestyle! </p>
<p>This software relies on OpenSSL for encryption, something that might not be available or suitable for your platform of choice. As an alternative you might consider another free, open source building block like libtommath to do the crypto.</p>

<h3>Is there any documentation on Spotify's protocol?</h3>
<p>We gave a law firm a few hours (see, we're already back a few thousand SEK :/) to investigate the legal aspects of this project before going public.<br />
They recommended against releasing any documentation on Spotify's internals.</p>
<p>Hence we won't provide you with any ordinary documentation on whatever we may know. For now, provided that you've got some basic understanding of code, you may want to checkout the source code of despotify to see how things work.</p>

<h3>I've found a bug or have a patch!</h3>
<p>Contact us and we'll look into it.</p>

<h3>What's with the name?</h3>
<p>We don't believe that anyone should control music in the way despots control their countries. <br />
We love both music and free software!
</p>

<h3>How can I get in touch with you?</h3>
<p>Use electronic mail. Try <em>despotify</em> at <em>gmail.com</em>.<br />
Assume no privacy.</p>

<h3>Who are you?</h3>
<p>We are a group of loosely related Swedish computer science researchers, security professionals and geeks that believe strongly in the right to tinker with technology. Because there is money involved and because Spotify has connections to the music industry we won't announce our identities at this time.</p>

<h3>PGP identities</h3>
<p>
<a href="researcher-a.asc">researcher-a.asc</a><br />
<a href="researcher-b.asc">researcher-b.asc</a><br />
<a href="researcher-c.asc">researcher-c.asc</a><br />
(more on this later)
</p>

<div class="nav" id="criticism">
	<a href="#despotify">Despotify</a>
	<strong>&raquo;</strong>
	<a href="#source">Source code</a>
	<strong>&raquo;</strong>
	<a href="#news">News</a>
	<strong>&raquo;</strong>
	<a href="#clients">Clients</a>
	<strong>&raquo;</strong>
	<a href="#faq">FAQ</a>
	<strong>&raquo;</strong>
	<a href="#criticism" class="cur">Criticism</a>
	<strong>&raquo;</strong>
	<a href="#legal">Legal</a>
</div>
<h1>Criticism</h1>
<p>As much as we'd like it, this site is not about commenting on Despotify, our actions or Spotify.<br />
But as avid supporters of the social media scene we've decided a good compromise would be to let you post relevant links to threads on <a href="http://jaiku.com">Jaiku</a>, <a href="http://bloggy.se">Bloggy</a>, blog posts or news articles.<br />
</p>
<p>
<form action="post.php" method="post">
	<div>
	<strong>Link URL</strong>
	<input type="text" name="url" size="50" />
	<input type="submit" name="" value="Post link!" disabled="disabled" />
	</div>
	<em>Currently disabled due to load problems on host</em>
</form>
</p>
<hr />


<div class="nav" id="legal">
	<a href="#despotify">Despotify</a>
	<strong>&raquo;</strong>
	<a href="#source">Source code</a>
	<strong>&raquo;</strong>
	<a href="#news">News</a>
	<strong>&raquo;</strong>
	<a href="#clients">Clients</a>
	<strong>&raquo;</strong>
	<a href="#faq">FAQ</a>
	<strong>&raquo;</strong>
	<a href="#criticism">Criticism</a>
	<strong>&raquo;</strong>
	<a href="#legal" class="cur">Legal</a>
</div>
<h1>Legal</h1>

<p><em>"The <a href="http://en.wikipedia.org/wiki/Streisand_effect">Streisand effect</a> is a phenomenon on the Internet where an attempt to censor or remove a piece of information backfires, causing the information to be widely publicized."</em></p>

</div>
<!-- /wrapper -->



<div id="h">
<p>
	<img src="hack-se.jpg" alt="#hack.se" />
</p>
<p>
	#hack.se <a href="http://demo.hack.se/">demo scene</a> division
</p>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-7622097-2");
pageTracker._trackPageview();
} catch(err) {}</script>
</body>
</html>
